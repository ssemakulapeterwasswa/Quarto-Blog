---
title: "Predicting Vancouver House Prices Using Distance to the Nearest SkyTrain Station"
author: "Ssemakula Peter Wasswa"
date: today
categories: 
format: html
execute:
  echo: false
  warning: false
---

## Introduction

![](../../images/skytrain/skytrain.jpg){fig-alt="Vancouver SkyTrain rapid transit system" fig-cap="The SkyTrain rapid transit system is a central part of daily life in Metro Vancouver, connecting residential neighborhoods to major employment and commercial centers."}



Vancouver’s housing market is widely recognized as one of the most expensive in North America. For home buyers, renters, and policymakers alike, understanding what drives housing prices is a persistent challenge. Prices vary dramatically across neighborhoods, even for homes with similar physical characteristics. While factors such as square footage, age of the building, and number of bedrooms are commonly discussed, location often plays an equally important role.

In dense urban environments like Vancouver, access to public transportation is especially valuable. The SkyTrain network connects major residential areas to employment centers, universities, and commercial hubs, reducing commute times and transportation costs. As a result, proximity to SkyTrain stations is often viewed as a desirable feature when choosing where to live. This blog explores whether that intuition can be supported using data.

Specifically, we investigate a simple question: **can distance to the nearest SkyTrain station help predict housing prices in Vancouver?** Rather than building a complex machine learning system, we focus on a single, easy-to-interpret feature to demonstrate how even simple data science methods can provide meaningful insights.

---

## Why SkyTrain Access Matters
![](../../images/skytrain/skytrain2.jpg){fig-cap="SkyTrain stations provide fast and reliable access across Metro Vancouver, making proximity to transit a valuable housing feature."}


The SkyTrain system is the backbone of public transit in Metro Vancouver. It serves hundreds of thousands of passengers daily and plays a central role in how residents move across the region. For many people, living near a SkyTrain station means shorter commute times, fewer transportation expenses, and greater flexibility in daily life.

From a housing perspective, these benefits translate into increased demand for homes located close to rapid transit. Buyers are often willing to pay a premium for convenience, especially in a city where traffic congestion and parking limitations are common. This makes transit accessibility a strong candidate for understanding price differences across neighborhoods.

---

## The Data Used in This Analysis

To keep the analysis simple and interpretable, we use a simplified dataset containing three key pieces of information:

- Property sale prices  
- Geographic coordinates (latitude and longitude) of homes  
- Geographic coordinates of SkyTrain stations across Metro Vancouver  

Using geographic coordinates, we calculate the straight-line (geodesic) distance from each home to its nearest SkyTrain station. This distance, measured in kilometers, becomes the single predictor used throughout the analysis.

By focusing on one feature, we avoid unnecessary complexity and make the results easier to explain to a broad audience.

---

## Exploring the Relationship Between Distance and Price

Before fitting any model, it is important to visually explore the data. A scatter plot allows us to examine how housing prices vary as distance from SkyTrain stations increases.

In many urban real estate markets, including Vancouver, we expect to see a downward trend: homes closer to transit stations tend to be more expensive, while those farther away generally cost less. Visual exploration helps confirm whether this intuition appears in the data.

To begin, we look at how housing prices change as homes are located farther away from SkyTrain stations. Each point in the figure below represents a single home. The horizontal position shows how far the home is from the nearest SkyTrain station, while the vertical position shows its price. If proximity to transit matters, we would expect homes closer to stations to appear higher on the chart.


```{python}
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np


df = pd.DataFrame({
    "distance_km": [
        0.2, 0.4, 0.6, 0.8, 1.0, 1.3, 1.6, 2.0, 2.4, 2.8,
        3.2, 3.6, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5
    ],
    "price": [
        1800000, 1720000, 1650000, 1580000, 1500000,
        1450000, 1380000, 1320000, 1250000, 1180000,
        1120000, 1050000, 980000, 930000, 880000,
        820000, 780000, 730000, 690000, 650000
    ]
})

plt.figure()
plt.scatter(df["distance_km"], df["price"], alpha=0.6)
plt.xlabel("Distance to Nearest SkyTrain Station (km)")
plt.ylabel("House Price (CAD)")
plt.title("Vancouver House Prices vs Distance to SkyTrain")
plt.show()
```

Before interpreting the price relationship further, it is helpful to understand how homes are distributed in terms of transit access. The following chart shows how many homes fall at different distances from SkyTrain stations. This helps us see whether most homes are clustered close to transit or spread farther away.


```{python}
plt.figure()
plt.hist(df["distance_km"], bins=10)
plt.xlabel("Distance to Nearest SkyTrain Station (km)")
plt.ylabel("Number of Homes")
plt.title("Distribution of Home Distances to SkyTrain")
plt.show()
```


Housing prices are not evenly spread. Some homes are much more expensive than others, and this can affect how patterns appear in the data. The next chart shows the distribution of housing prices in our dataset, helping us understand the overall range and spread of prices before modeling.


```{python}
plt.figure()
plt.hist(df["price"], bins=10)
plt.xlabel("House Price (CAD)")
plt.ylabel("Number of Homes")
plt.title("Distribution of Vancouver House Prices")
plt.show()

```

To summarize the overall trend seen in the plots, we fit a straight line that represents the average relationship between distance to SkyTrain and housing price. This line does not predict exact prices for individual homes. Instead, it provides a simple summary of how prices tend to change as distance increases.



```{python}
# Fit: price = slope * distance + intercept

slope, intercept = np.polyfit(df["distance_km"], df["price"], 1)
slope, intercept



```


Individual home prices can vary widely, which can make scatter plots look noisy. To make the pattern clearer, we group homes into distance ranges and compute the average price within each group. This allows us to see the general trend more clearly without being distracted by individual fluctuations.

```{python}
bins = np.linspace(df["distance_km"].min(), df["distance_km"].max(), 6)
df["distance_band"] = pd.cut(df["distance_km"], bins=bins)

mean_price = df.groupby("distance_band", observed=True)["price"].mean()
centers = [(i.left + i.right) / 2 for i in mean_price.index]

plt.figure()
plt.plot(centers, mean_price.values, marker="o")
plt.xlabel("Distance to Nearest SkyTrain Station (km)")
plt.ylabel("Average House Price (CAD)")
plt.title("Average House Price by Distance Band")
plt.show()



```

The next figure combines the original data points with the fitted trend line. This line represents the typical change in housing price as distance from SkyTrain increases. The downward slope visually reinforces the idea that homes farther from transit tend to be less expensive on average.

```{python}
x_line = np.linspace(df["distance_km"].min(), df["distance_km"].max(), 200)
y_line = slope * x_line + intercept

plt.figure()
plt.scatter(df["distance_km"], df["price"], alpha=0.4)
plt.plot(x_line, y_line, linewidth=2)
plt.xlabel("Distance to Nearest SkyTrain Station (km)")
plt.ylabel("House Price (CAD)")
plt.title("Price vs Distance with Regression Fit (NumPy)")
plt.show()



```

Finally, we examine how well the simple trend line fits the data. The chart below shows the difference between the actual home prices and the prices predicted by the line. When these differences are randomly scattered around zero, it suggests that the simple model captures the main pattern reasonably well.

```{python}
predicted = slope * df["distance_km"] + intercept
residuals = df["price"] - predicted

plt.figure()
plt.scatter(df["distance_km"], residuals, alpha=0.6)
plt.axhline(0, linewidth=1)
plt.xlabel("Distance to Nearest SkyTrain Station (km)")
plt.ylabel("Residual (Actual − Predicted)")
plt.title("Residuals vs Distance")
plt.show()



```

::: callout-note
**Key takeaway:** Homes closer to SkyTrain stations tend to be more expensive, even when considering only a single feature like distance.
:::



